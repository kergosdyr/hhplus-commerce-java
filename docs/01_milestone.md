# e-커머스 서비스 - Milestone

## 1. 프로젝트 설계 및 Mock API 작성을 완료한다.

### TODO LIST

- [ ] **주차 별 마일스톤을 설정**한다.  
- [ ] **요구사항**에 대한 분석을 완료한다.  
- [ ] **이벤트 시퀀스 다이어그램**을 작성한다.  
- [ ] **ERD 설계**를 완료한다.  
- [ ] **API 명세 문서**를 작성한다.  
- [ ] **Mock API**를 구현한다.  

|     | 작업                                               | 예상 시간 (시간) |
|-----|--------------------------------------------------|------------|
| 1   | **1. 프로젝트 설계 및 Mock API 작성**                     | **40**     |
| 1.1 | 주차 별 마일스톤 설정                                     | 2          |
| 1.2 | 요구사항 분석 (요구사항 정리, 세부 기능 정의)                      | 6          |
| 1.3 | 이벤트 시퀀스 다이어그램 작성 (잔액 충전, 상품 조회, 쿠폰, 주문/결제 등)     | 8          |
| 1.4 | ERD 설계 (User, Product, Coupon, Order, Payment 등) | 8          |
| 1.5 | API 명세 문서 작성                                     | 8          |
| 1.6 | Mock API 구현 (간단한 Controller, Service 스텁)         | 8          |


### Description

1. **마일스톤 설정**을 통해 전체 프로젝트 타임라인을 확정합니다.  
2. **요구사항 분석** : e-커머스 서비스에서 필요한 핵심 기능(잔액 충전/조회, 상품 조회, 쿠폰, 주문/결제, 인기상품 조회 등)을 세부적으로 정의합니다.  
3. **시퀀스 다이어그램** : 각 기능별(잔액 충전, 상품 조회, 쿠폰 발급, 주문/결제, 인기상품 조회) 시나리오를 기반으로 다이어그램을 작성합니다.  
4. **ERD 설계** : User, Product, Coupon, Order, Payment, OrderItem 등의 테이블 구조와 관계를 정의합니다.  
5. **API 명세 문서** : REST API 형태로 각 엔드포인트, 파라미터, 응답 스펙 정리.  
6. **Mock API 구현** : 실제 비즈니스 로직 없이, Request/Response만 잡아 간단히 테스트할 수 있는 Controller, Service 스켈레톤을 작성합니다.

---

## 2. 핵심 기능(잔액 및 상품, 쿠폰, 주문/결제) 개발을 진행한다.

### TODO LIST

- **잔액 충전 및 조회** 기능을 구현한다.  
  - [ ] 잔액 충전 API 개발  
  - [ ] 잔액 조회 API 개발  

- **상품 조회** 기능을 구현한다.  
  - [ ] 상품 목록 조회 API 개발  
  - [ ] 상품 상세 조회 API (선택)  

- **쿠폰 기능**(선착순 발급, 보유 쿠폰 조회)을 구현한다.  
  - [ ] 쿠폰 발급 API 개발 (선착순 로직 고려)  
  - [ ] 보유 쿠폰 조회 API 개발  

- **주문/결제의 초반 구조**를 구현한다 (상품 재고, 쿠폰 적용, 금액 계산 등).  
  - [ ] 주문 생성 API (주문서 작성)  
  - [ ] 주문에 대한 기본 결제 로직 (잔액 차감, 결제 내역 기록)  

|       | 작업                           | 예상 시간 (시간) |
|-------|------------------------------|------------|
| 2     | **2. 핵심 기능 구현 & TDD**        | **40**     |
| 2.1   | 잔액 기능 개발                     |            |
| 2.1.1 | 잔액 충전 API 개발                 | 8          |
| 2.1.2 | 잔액 조회 API 개발                 | 4          |
| 2.2   | 상품 조회 기능 개발                  |            |
| 2.2.1 | 상품 목록 조회 API 개발              | 6          |
| 2.2.2 | 상품 상세 조회 API 개발 (선택)         | 4          |
| 2.3   | 쿠폰 기능 개발                     |            |
| 2.3.1 | 쿠폰 발급 API (선착순)              | 6          |
| 2.3.2 | 보유 쿠폰 조회 API                 | 2          |
| 2.4   | 주문/결제 기본 로직 구축               |            |
| 2.4.1 | 주문 생성 API (재고 확인, 상품별 금액 계산) | 6          |
| 2.4.2 | 기본 결제 로직 (잔액 차감, 결제 기록)      | 4          |

### Description

1. **잔액 API**: 사용자 잔액의 충전과 조회, 동시성(트랜잭션) 고려.  
2. **상품 조회**: 상품 목록, 가격, 재고 등 확인.  
3. **쿠폰 기능**: 선착순 쿠폰 발급 로직 구현(쿠폰 수량 감소, 동시성 처리), 보유 쿠폰 조회.  
4. **주문/결제 구조**:  
   - 주문 생성 시 상품 재고 확인,  
   - 쿠폰 할인 금액 반영,  
   - 결제(잔액 차감) & 결제 이력 작성,  
   - 아직 **전체 결제 프로세스** 중 일부만 구현

---

## 3. 결제 로직 고도화, 인기상품 조회, 코드 리팩토링 및 테스트를 진행한다.

### TODO LIST

- **결제 로직 고도화**  
  - [ ] 결제 처리 API 개발 (잔액 부족 시 실패, 결제 로그/이력 남김)  
  - [ ] 결제 후 재고 확정 및 쿠폰 사용 완료 처리  
  - [ ] 부분 취소나 예외 상황 발생 시 롤백(선택사항)

- **인기상품 조회** 기능 개발  
  - [ ] 최근 3일간 주문내역을 기반으로 상품 판매량 집계  
  - [ ] 상위 5개 상품 정보 조회 API 개발  

- **동시성 이슈 검토** 및 **코드 리팩토링**  
  - [ ] 잔액 충전 & 결제 시 Lock/트랜잭션 확인  
  - [ ] 쿠폰 발급 및 사용 시 중복발급, 중복사용 방지 로직 점검  
  - [ ] 재고 차감 로직 최종 점검  

- **단위 테스트 & 통합 테스트**  
  - [ ] 기존 기능(잔액, 상품, 쿠폰, 주문/결제)에 대한 테스트 작성  
  - [ ] 통합 테스트(End-to-End) 시나리오 점검  

- [ ] **문서 업데이트** (API, ERD, 시퀀스, README)

|       | 작업                                | 예상 시간 (시간) |
|-------|-----------------------------------|------------|
| 3     | **3. 결제 로직 고도화 & 인기상품 조회 & 리팩토링** | **40**     |
| 3.1   | 결제 로직 고도화                         |            |
| 3.1.1 | 결제 처리 API (잔액 부족 시 예외, 결제 이력 관리)  | 8          |
| 3.1.2 | 결제 후 재고/쿠폰 상태 최종 반영               | 4          |
| 3.2   | 인기상품 조회 API 개발 (최근 3일, 판매량 상위 5개) | 6          |
| 3.3   | 동시성 이슈 검토 및 코드 리팩토링               | 10         |
| 3.4   | 단위 테스트 & 통합 테스트                   | 8          |
| 3.5   | 문서 업데이트 (API, ERD, README 등)      | 4          |

### Description

1. **결제 로직 고도화**: 결제 시나리오를 완성해 잔액 차감, 결제 내역 기록, 쿠폰 사용 여부, 재고 최종 차감 등을 세부적으로 처리.  
2. **인기상품 조회**: 최근 3일 간의 주문 데이터 집계, 상위 5개 상품을 반환하는 기능.  
3. **동시성 이슈 및 리팩토링**: Lock/트랜잭션 수준, 코드 정리, 오류 처리 등을 개선.  
4. **테스트**: 단위테스트, 통합테스트를 통해 기능이 정확히 동작하는지 검증.  
5. **문서 업데이트**: 실제 구현과 문서가 일치하도록 정리.  